{% extends 'pages/base.njk' %}

{% block head %}
<style>
{% include 'assets/css/prism-theme-base.css' %}
{% include 'assets/css/theme-vars.css' %}
</style>
{% endblock %}

{% block content %}
<main id="main-content" tabindex="-1" class="container region">
    <article class="flow">
        <header>
            <time datetime="{{ page.date | htmlDateString }}">{{ page.date | readableDate }}</time>
            {% if update %}
                <span class="content__header-time--updated">Uppdaterat: <time datetime="{{ update | htmlDateString }}">{{ update | readableDate }}</time></span>
            {% endif %}
            {% if summary %}
            <p class="lead">{{ summary | safe }}</p>
            {% endif %}
        </header>
        <div class="flow">
            {{ content | safe }}
        </div>
        <footer>
            {% include "../components/link-list-footer.njk" %}

            {% if tags %}
                {% set tag = tags | random %}
                {% set tagPosts = collections[tag] | limit(3) | shuffle %}
                {% if tagPosts.length > 1 %}
                <section class="content__footer-related">
                    <h3 class="content__footer-related-title">Mer fr√•n {{ tag }}</h3>
                    <ul class="content__footer-related-list">
                        {% for post in tagPosts %}
                        <li class="content__footer-related-item">
                            <a href="{{ post.url | url }}">{{ post.data.title }}</a>
                        </li>
                        {% endfor %}
                    </ul>
                </section>
                {% endif %}
            {% endif %}
        </footer>
    </article>
</main>
{% endblock %}
